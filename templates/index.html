<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Schedly</title>
    <link rel="stylesheet" href="{{url_for('static',filename='dist/css/output.css')}}">
</head>
<body class="bg-primary">
    

<nav class="bg-white border-gray-200 dark:bg-gray-900">
    <div class="flex flex-wrap justify-between items-center mx-auto max-w-screen-xl p-4">
        <a href="https://flowbite.com" class="flex items-center space-x-3 rtl:space-x-reverse">
            <img src="https://flowbite.com/docs/images/logo.svg" class="h-8" alt="Flowbite Logo" />
            <span class="self-center text-2xl font-semibold whitespace-nowrap dark:text-white">Flowbite</span>
        </a>
        <div class="flex items-center space-x-6 rtl:space-x-reverse">
            <a href="tel:5541251234" class="text-sm  text-gray-500 dark:text-white hover:underline">(555) 412-1234</a>
            <a href="#" class="text-sm  text-blue-600 dark:text-blue-500 hover:underline">Login</a>
        </div>
    </div>
</nav>
<nav class="bg-gray-50 dark:bg-gray-700">
    <div class="max-w-screen-xl px-4 py-3 mx-auto">
        <div class="flex items-center">
            <ul class="flex flex-row font-medium mt-0 space-x-8 rtl:space-x-reverse text-sm">
                <li>
                    <a href="#" class="text-gray-900 dark:text-white hover:underline" aria-current="page">Home</a>
                </li>
                <li>
                    <a href="#" class="text-gray-900 dark:text-white hover:underline">Company</a>
                </li>
                <li>
                    <a href="#" class="text-gray-900 dark:text-white hover:underline">Team</a>
                </li>
                <li>
                    <a href="#" class="text-gray-900 dark:text-white hover:underline">Features</a>
                </li>
            </ul>
        </div>
    </div>
</nav>

    <header>
        <h1>Schedly</h1>
        <button id="addTaskBtn" onclick="openAddForm()">+ Add Task</button>
    </header>

    <section>
        <h2>Task Schedule</h2>
        <ul>
            {% for task in tasks %}
            <li>
                <input type="checkbox" 
                       onclick="location.href='{{ url_for('toggle_done', task_id=task.id) }}'" 
                       {% if task.done %} checked {% endif %}>

                <span style="
                    {% if task.type == 'important' %}font-weight: bold; {% endif %}
                    {% if task.done %}text-decoration: line-through; {% endif %}">
                    {{ task.name }}
                </span>

                <button onclick="openEditForm({{ task.id }}, '{{ task.name|e }}', '{{ task.type|e }}')">Edit</button>
                <button onclick="location.href='{{ url_for('delete_task', task_id=task.id) }}'">Delete</button>
            </li>
            {% endfor %}
        </ul>
    </section>

    <!-- Modal for Add/Edit -->
    <div id="taskModal" class="modal hidden">
        <form id="taskForm" method="POST">
            <input type="text" name="task_name" id="taskNameInput" placeholder="Task Name" required>
            <select name="task_type" id="taskTypeInput">
                <option value="normal">Normal</option>
                <option value="important">Important</option>
            </select>
            <button type="submit">Save</button>
            <button type="button" onclick="closeModal()">Cancel</button>
        </form>
    </div>

    <script>
        const modal = document.getElementById('taskModal');
        const taskForm = document.getElementById('taskForm');
        const taskNameInput = document.getElementById('taskNameInput');
        const taskTypeInput = document.getElementById('taskTypeInput');

        function openAddForm() {
            taskForm.action = "{{ url_for('add_task') }}";
            taskNameInput.value = '';
            taskTypeInput.value = 'normal';
            modal.classList.remove('hidden');
        }

        function openEditForm(taskId, taskName, taskType) {
            taskForm.action = `/edit/${taskId}`;
            taskNameInput.value = taskName;
            taskTypeInput.value = taskType;
            modal.classList.remove('hidden');
        }

        function closeModal() {
            modal.classList.add('hidden');
        }
    </script>

    <script src="https://cdn.jsdelivr.net/npm/flowbite@2.5.2/dist/flowbite.min.js"></script>
</body>
</html>
